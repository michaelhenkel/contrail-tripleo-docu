<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Basic Deployment (CLI) &mdash; tripleo-docs 0.0.1.dev17 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1.dev17',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/cookies.js"></script>
    <script type="text/javascript" src="../_static/expandable.js"></script>
    <script type="text/javascript" src="../_static/admonition_selector.js"></script>
    <script type="text/javascript" src="../_static/jquery.scrollTo.js"></script>
    <script type="text/javascript" src="../_static/jquery.nav.js"></script>
    <script type="text/javascript" src="../_static/menu.js"></script>
    <link rel="top" title="tripleo-docs 0.0.1.dev17 documentation" href="../index.html" />
    <link rel="next" title="Advanced Deployment" href="../advanced_deployment/advanced_deployment.html" />
    <link rel="prev" title="Undercloud Installation" href="../installation/installation.html" /> 
  </head>
  <body>
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="basic-deployment-cli">
<h1>Basic Deployment (CLI)<a class="headerlink" href="#basic-deployment-cli" title="Permalink to this headline">¶</a></h1>
<p>With these few steps you will be able to simply deploy via TripleO to your
environment using our defaults in a few steps.</p>
<div class="section" id="prepare-your-environment">
<h2>Prepare Your Environment<a class="headerlink" href="#prepare-your-environment" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Make sure you have your environment ready and undercloud running:</p>
<ul class="simple">
<li><a class="reference internal" href="../environments/environments.html"><em>Environment Setup</em></a></li>
<li><a class="reference internal" href="../installation/installing.html"><em>Installing the Undercloud</em></a></li>
</ul>
</li>
<li><p class="first">Log into your undercloud (instack) virtual machine as non-root user:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>ssh root@&lt;undercloud-machine&gt;

su - stack
</pre></div>
</div>
</li>
<li><p class="first">In order to use CLI commands easily you need to source needed environment
variables:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>source stackrc
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="get-images">
<h2>Get Images<a class="headerlink" href="#get-images" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you already have images built, perhaps from a previous installation of
TripleO, you can simply copy those image files into your regular user&#8217;s
home directory and skip this section.</p>
<p>If you do this, be aware that sometimes newer versions of TripleO do not
work with older images, so if the deployment fails it may be necessary to
delete the older images and restart the process from this step.</p>
<p>The image files required are:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="n">deploy</span><span class="o">-</span><span class="n">ramdisk</span><span class="o">-</span><span class="n">ironic</span><span class="o">.</span><span class="n">initramfs</span>
<span class="n">deploy</span><span class="o">-</span><span class="n">ramdisk</span><span class="o">-</span><span class="n">ironic</span><span class="o">.</span><span class="n">kernel</span>
<span class="n">ironic</span><span class="o">-</span><span class="n">python</span><span class="o">-</span><span class="n">agent</span><span class="o">.</span><span class="n">initramfs</span>
<span class="n">ironic</span><span class="o">-</span><span class="n">python</span><span class="o">-</span><span class="n">agent</span><span class="o">.</span><span class="n">kernel</span>
<span class="n">overcloud</span><span class="o">-</span><span class="n">full</span><span class="o">.</span><span class="n">initrd</span>
<span class="n">overcloud</span><span class="o">-</span><span class="n">full</span><span class="o">.</span><span class="n">qcow2</span>
<span class="n">overcloud</span><span class="o">-</span><span class="n">full</span><span class="o">.</span><span class="n">vmlinuz</span>
</pre></div>
</div>
</div>
<p>Images must be built prior to doing a deployment. An IPA ramdisk,
deployment ramdisk, and openstack-full image can all be built using
instack-undercloud.</p>
<p>It&#8217;s recommended to build images on the installed undercloud directly since all
the dependencies are already present.</p>
<p>The following steps can be used to build images. They should be run as the same
non-root user that was used to install the undercloud.</p>
<ol class="arabic">
<li><p class="first">Choose image operating system:</p>
<p>The built images will automatically have the same base OS as the
running undercloud. To choose a different OS use one of the following
commands (make sure you have your OS specific content visible):</p>
<div class="centos admonition">
<p class="first admonition-title">CentOS</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span>export NODE_DIST=centos7
</pre></div>
</div>
</div>
<div class="rhel admonition">
<p class="first admonition-title">RHEL</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span>export NODE_DIST=rhel7
</pre></div>
</div>
</div>
</li>
<li><p class="first">Install the <tt class="docutils literal"><span class="pre">current-tripleo</span></tt> delorean repo and deps repo into the overcloud images:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span>export USE_DELOREAN_TRUNK=1
export DELOREAN_TRUNK_REPO=&quot;http://trunk.rdoproject.org/centos7/current-tripleo/&quot;
export DELOREAN_REPO_FILE=&quot;delorean.repo&quot;
</pre></div>
</div>
</div></blockquote>
<div class="stable admonition">
<p class="first admonition-title">Stable Branch</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span>export DELOREAN_TRUNK_REPO=&quot;http://trunk.rdoproject.org/centos7-liberty/current/&quot;
</pre></div>
</div>
</div>
</li>
<li><p class="first">Build the required images:</p>
</li>
</ol>
<blockquote>
<div><div class="rhel admonition">
<p class="first admonition-title">RHEL</p>
<p>Download the RHEL 7.1 cloud image or copy it over from a different location,
for example:
<a class="reference external" href="https://access.redhat.com/downloads/content/69/ver=/rhel---7/7.1/x86_64/product-downloads">https://access.redhat.com/downloads/content/69/ver=/rhel&#8212;7/7.1/x86_64/product-downloads</a>,
and define the needed environment variables for RHEL 7.1 prior to running
<tt class="docutils literal"><span class="pre">openstack</span> <span class="pre">overcloud</span> <span class="pre">image</span> <span class="pre">build</span> <span class="pre">--all</span></tt>:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span>export DIB_LOCAL_IMAGE=rhel-guest-image-7.1-20150224.0.x86_64.qcow2
</pre></div>
</div>
</div>
<div class="portal admonition">
<p class="first admonition-title">RHEL Portal Registration</p>
<p>To register the image builds to the Red Hat Portal define the following variables:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span>export REG_METHOD=portal
export REG_USER=&quot;[your username]&quot;
export REG_PASSWORD=&quot;[your password]&quot;
# Find this with `sudo subscription-manager list --available`
export REG_POOL_ID=&quot;[pool id]&quot;
export REG_REPOS=&quot;rhel-7-server-rpms rhel-7-server-extras-rpms rhel-ha-for-rhel-7-server-rpms \
    rhel-7-server-optional-rpms rhel-7-server-openstack-6.0-rpms&quot;
</pre></div>
</div>
</div>
<div class="satellite admonition">
<p class="first admonition-title">RHEL Satellite Registration</p>
<p>To register the image builds to a Satellite define the following
variables. Only using an activation key is supported when registering to
Satellite, username/password is not supported for security reasons. The
activation key must enable the repos shown:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span>export REG_METHOD=satellite
# REG_SAT_URL should be in the format of:
# http://&lt;satellite-hostname&gt;
export REG_SAT_URL=&quot;[satellite url]&quot;
export REG_ORG=&quot;[satellite org]&quot;
# Activation key must enable these repos:
# rhel-7-server-rpms
# rhel-7-server-optional-rpms
# rhel-7-server-extras-rpms
# rhel-7-server-openstack-6.0-rpms
export REG_ACTIVATION_KEY=&quot;[activation key]&quot;
</pre></div>
</div>
</div>
<div class="source admonition">
<p class="first admonition-title">Source</p>
<p>Git checkouts of the puppet modules can be used instead of packages. Export the
following environment variable:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>export DIB_INSTALLTYPE_puppet_modules=source
</pre></div>
</div>
<p class="last">It is also possible to use this functionality to use an in-progress review
as part of the overcloud image build.  See
<a class="reference internal" href="../advanced_deployment/in_progress_review.html"><em>Using an In-Progress Review</em></a> for details.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>openstack overcloud image build --all
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This command will build <strong>overcloud-full</strong> images (*.qcow2, *.initrd,
*.vmlinuz) and <strong>ironic-python-agent</strong> images (*.initramfs, *.kernel)</p>
<p class="last">To rebuild only a single image, see <a class="reference internal" href="../advanced_deployment/build_single_image.html"><em>Building a Single Image</em></a>.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="upload-images">
<h2>Upload Images<a class="headerlink" href="#upload-images" title="Permalink to this headline">¶</a></h2>
<p>Load the images into the undercloud Glance:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>openstack overcloud image upload
</pre></div>
</div>
</div>
<div class="section" id="register-nodes">
<h2>Register Nodes<a class="headerlink" href="#register-nodes" title="Permalink to this headline">¶</a></h2>
<p>Register nodes for your deployment with Ironic:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>openstack baremetal import --json instackenv.json
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It&#8217;s not recommended to delete nodes and/or rerun this command after
you have proceeded to the next steps. Particularly, if you start introspection
and then re-register nodes, you won&#8217;t be able to retry introspection until
the previous one times out (1 hour by default). If you are having issues
with nodes after registration, please follow
<a class="reference internal" href="../troubleshooting/troubleshooting-nodes.html#node-registration-problems"><em>Node Registration Problems</em></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>By default Ironic will not sync the power state of the nodes,
because in our HA (high availability) model Pacemaker is the
one responsible for controlling the power state of the nodes
when fencing.  If you are using a non-HA setup and want Ironic
to take care of the power state of the nodes please change the
value of the &#8220;force_power_state_during_sync&#8221; configuration option
in the /etc/ironic/ironic.conf file to &#8220;True&#8221; and restart the
openstack-ironic-conductor service.</p>
<p class="last">Also, note that if <tt class="docutils literal"><span class="pre">openstack</span> <span class="pre">undercloud</span> <span class="pre">install</span></tt> is re-run the value of
the &#8220;force_power_state_during_sync&#8221; configuration option will be set back to
the default, which is &#8220;False&#8221;.</p>
</div>
<p>Assign kernel and ramdisk to nodes:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>openstack baremetal configure boot
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If your hardware has several hard drives, it&#8217;s highly recommended that you
specify the exact device to be used during introspection and deployment
as a root device. Please see <a class="reference internal" href="../advanced_deployment/root_device.html#root-device"><em>Setting the Root Device for Deployment</em></a> for details.</p>
<p class="last">If you don&#8217;t specify the root device explicitly, any device may be picked.
Also the device chosen automatically is NOT guaranteed to be the same
across rebuilds. Make sure to wipe the previous installation before
rebuilding in this case.</p>
</div>
</div>
<div class="section" id="introspect-nodes">
<span id="introspection"></span><h2>Introspect Nodes<a class="headerlink" href="#introspect-nodes" title="Permalink to this headline">¶</a></h2>
<p>Introspect hardware attributes of nodes:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>openstack baremetal introspection bulk start
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>Introspection has to finish without errors.</strong>
The process can take up to 5 minutes for VM / 15 minutes for baremetal. If
the process takes longer, see <a class="reference internal" href="../troubleshooting/troubleshooting-nodes.html#introspection-problems"><em>Hardware Introspection Problems</em></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you need to introspect just a single node, see
<a class="reference internal" href="../advanced_deployment/introspect_single_node.html"><em>Introspecting a Single Node</em></a></p>
</div>
</div>
<div class="section" id="flavor-details">
<h2>Flavor Details<a class="headerlink" href="#flavor-details" title="Permalink to this headline">¶</a></h2>
<p>The undercloud will have a number of default flavors created at install time.
In most cases these flavors do not need to be modified, but they can be if
desired.  By default, all overcloud instances will be booted with the
<tt class="docutils literal"><span class="pre">baremetal</span></tt> flavor, so all baremetal nodes must have at least as much
memory, disk, and cpu as that flavor.</p>
<p>In addition, there are profile-specific flavors created which can be used with
the profile-matching feature.  For more details on deploying with profiles,
see <a class="reference internal" href="../advanced_deployment/profile_matching.html"><em>Advanced Profile Matching</em></a>.</p>
</div>
<div class="section" id="configure-a-nameserver-for-the-overcloud">
<h2>Configure a nameserver for the Overcloud<a class="headerlink" href="#configure-a-nameserver-for-the-overcloud" title="Permalink to this headline">¶</a></h2>
<p>Overcloud nodes can have a nameserver configured in order to resolve
hostnames via DNS. The nameserver is defined in the undercloud&#8217;s neutron
subnet. If needed, define the nameserver to be used for the environment:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># List the available subnets
neutron subnet-list
neutron subnet-update &lt;subnet-uuid&gt; --dns-nameserver &lt;nameserver-ip&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A public DNS server, such as 8.8.8.8 or the undercloud DNS name server
can be used if there is no internal DNS server.</p>
</div>
<div class="virtual admonition">
<p class="first admonition-title">Virtual</p>
<p class="last">In virtual environments, the libvirt default network DHCP server address,
typically 192.168.122.1, can be used as the overcloud nameserver.</p>
</div>
</div>
<div class="section" id="deploy-the-overcloud">
<h2>Deploy the Overcloud<a class="headerlink" href="#deploy-the-overcloud" title="Permalink to this headline">¶</a></h2>
<p>By default 1 compute and 1 control node will be deployed, with networking
configured for the virtual environment.  To customize this, see the output of:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>openstack help overcloud deploy
</pre></div>
</div>
<div class="ceph admonition">
<p class="first admonition-title">Ceph</p>
<p>When deploying Ceph it is necessary to specify the number of Ceph OSD nodes
to be deployed and to provide some additional parameters to enable usage
of Ceph for Glance, Cinder, Nova or all of them. To do so, use the
following arguments when deploying:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>--ceph-storage-scale &lt;number of nodes&gt; -e /usr/share/openstack-tripleo-heat-templates/environments/storage-environment.yaml
</pre></div>
</div>
<p>By default when Ceph is enabled the Cinder LVM back-end is disabled. This
behavior may be changed passing:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">cinder</span><span class="o">-</span><span class="n">lvm</span>
</pre></div>
</div>
</div>
<div class="satellite admonition">
<p class="first admonition-title">RHEL Satellite Registration</p>
<p>To register the Overcloud nodes to a Satellite add the following flags
to the deploy command:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>--rhel-reg --reg-method satellite --reg-org &lt;ORG ID#&gt; --reg-sat-url &lt;satellite URL&gt; --reg-activation-key &lt;KEY&gt;
</pre></div>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p>Only using an activation key is supported when registering to
Satellite, username/password is not supported for security reasons.
The activation key must enable the following repos:</p>
<p>rhel-7-server-rpms</p>
<p>rhel-7-server-optional-rpms</p>
<p>rhel-7-server-extras-rpms</p>
<p class="last">rhel-7-server-openstack-6.0-rpms</p>
</div>
</div>
<div class="ssl admonition">
<p class="first admonition-title">SSL</p>
<p class="last">To deploy an overcloud with SSL, see <a class="reference internal" href="../advanced_deployment/ssl.html"><em>Deploying with SSL</em></a>.</p>
</div>
<p>Run the deploy command, including any additional parameters as necessary:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>openstack overcloud deploy --templates [additional parameters]
</pre></div>
</div>
<div class="virtual admonition">
<p class="first admonition-title">Virtual</p>
<p class="last">When deploying the Compute node in a virtual machine, add <tt class="docutils literal"><span class="pre">--libvirt-type</span>
<span class="pre">qemu</span></tt> or launching instances on the deployed overcloud will fail.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To deploy an overcloud with multiple controllers and achieve HA
you must provision at least 3 controller nodes, specify an NTP
server and enable Pacemaker as cluster resource manager. To do
so add the following arguments to the deploy command:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span>--control-scale 3 -e /usr/share/openstack-tripleo-heat-templates/environments/puppet-pacemaker.yaml --ntp-server pool.ntp.org
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To deploy the overcloud with network isolation, bonds, and/or custom
network interface configurations, instead follow the workflow here to
deploy: <a class="reference internal" href="../advanced_deployment/network_isolation.html"><em>Configuring Network Isolation</em></a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Previous versions of the client had many parameters defaulted. Some of these
parameters are now pulling defaults directly from the Heat templates. In
order to override these parameters, one should use an environment file to
specify these overrides, via &#8216;parameter_defaults&#8217;.</p>
<p class="last">The parameters that controlled these parameters will be deprecated in the
client, and eventually removed in favor of using environment files.</p>
</div>
</div>
<div class="section" id="post-deployment">
<h2>Post-Deployment<a class="headerlink" href="#post-deployment" title="Permalink to this headline">¶</a></h2>
<div class="section" id="access-the-overcloud">
<h3>Access the Overcloud<a class="headerlink" href="#access-the-overcloud" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">openstack</span> <span class="pre">overcloud</span> <span class="pre">deploy</span></tt> generates an overcloudrc file appropriate for
interacting with the deployed overcloud in the current user&#8217;s home directory.
To use it, simply source the file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>source ~/overcloudrc
</pre></div>
</div>
<p>To return to working with the undercloud, source the stackrc file again:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>source ~/stackrc
</pre></div>
</div>
</div>
<div class="section" id="setup-the-overcloud-network">
<h3>Setup the Overcloud network<a class="headerlink" href="#setup-the-overcloud-network" title="Permalink to this headline">¶</a></h3>
<p>Initial networks in Neutron in the Overlcoud need to be created for tenant
instances. The following are example commands to create the initial networks.
Edit the address ranges, or use the necessary neutron commands to match the
environment appropriately. This assumes a dedicated interface or native VLAN:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>neutron net-create nova --router:external --provider:network_type flat \
  --provider:physical_network datacentre
neutron subnet-create --name nova --disable-dhcp \
  --allocation-pool start=172.16.23.140,end=172.16.23.240 \
  --gateway 172.16.23.251 nova 172.16.23.128/25
</pre></div>
</div>
<p>The example shows naming the network &#8220;nova&#8221; because that will make tempest
tests to pass, based on the default floating pool name set in nova.conf. You
can confirm that the network was created with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>neutron net-list
</pre></div>
</div>
<p>Sample output of the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>+--------------------------------------+-------------+-------------------------------------------------------+
| id                                   | name        | subnets                                               |
+--------------------------------------+-------------+-------------------------------------------------------+
| d474fe1f-222d-4e32-802b-cde86e746a2a | nova        | 01c5f621-1e0f-4b9d-9c30-7dc59592a52f 172.16.23.128/25 |
+--------------------------------------+-------------+-------------------------------------------------------+
</pre></div>
</div>
<p>To use a VLAN, the following example should work. Customize the address ranges
and VLAN id based on the environment:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>neutron net-create nova --router:external --provider:network_type vlan \
  --provider:physical_network datacentre --provider:segmentation_id 195
neutron subnet-create --name nova --disable-dhcp \
  --allocation-pool start=172.16.23.140,end=172.16.23.240 \
  --gateway 172.16.23.251 nova 172.16.23.128/25
</pre></div>
</div>
</div>
<div class="section" id="validate-the-overcloud">
<h3>Validate the Overcloud<a class="headerlink" href="#validate-the-overcloud" title="Permalink to this headline">¶</a></h3>
<p>Source the <tt class="docutils literal"><span class="pre">overcloudrc</span></tt> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>source ~/overcloudrc
</pre></div>
</div>
<p>Create a directory for Tempest (eg. naming it <tt class="docutils literal"><span class="pre">tempest</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mkdir ~/tempest
cd ~/tempest
</pre></div>
</div>
<p>Tempest expects the tests it discovers to be in the current working directory.
Set it up accordingly:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>/usr/share/openstack-tempest-liberty/tools/configure-tempest-directory
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">~/tempest-deployer-input.conf</span></tt> file was created during deployment and
contains deployment specific settings. Use that file to configure
Tempest:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>tools/config_tempest.py --deployer-input ~/tempest-deployer-input.conf \
                        --debug --create \
                        identity.uri $OS_AUTH_URL \
                        identity.admin_password $OS_PASSWORD
</pre></div>
</div>
<p>Run Tempest:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">tools</span><span class="o">/</span><span class="n">run</span><span class="o">-</span><span class="n">tests</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The full Tempest test suite might take hours to run on a single CPU.</p>
</div>
</div>
<div class="section" id="redeploy-the-overcloud">
<h3>Redeploy the Overcloud<a class="headerlink" href="#redeploy-the-overcloud" title="Permalink to this headline">¶</a></h3>
<p>The overcloud can be redeployed when desired.</p>
<ol class="arabic">
<li><p class="first">First, delete any existing Overcloud:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>heat stack-delete overcloud
</pre></div>
</div>
</li>
<li><p class="first">Confirm the Overcloud has deleted. It may take a few minutes to delete:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># This command should show no stack once the Delete has completed
heat stack-list
</pre></div>
</div>
</li>
<li><p class="first">Although not required, introspection can be rerun:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>openstack baremetal introspection bulk start
</pre></div>
</div>
</li>
<li><p class="first">Deploy the Overcloud again:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>openstack overcloud deploy --templates
</pre></div>
</div>
</li>
</ol>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3>Table Of Contents</h3>
            <ul><li><a href="../index.html">Return to project home page</a></li></ul>
            <ul>
<li><a class="reference internal" href="#">Basic Deployment (CLI)</a><ul>
<li><a class="reference internal" href="#prepare-your-environment">Prepare Your Environment</a></li>
<li><a class="reference internal" href="#get-images">Get Images</a></li>
<li><a class="reference internal" href="#upload-images">Upload Images</a></li>
<li><a class="reference internal" href="#register-nodes">Register Nodes</a></li>
<li><a class="reference internal" href="#introspect-nodes">Introspect Nodes</a></li>
<li><a class="reference internal" href="#flavor-details">Flavor Details</a></li>
<li><a class="reference internal" href="#configure-a-nameserver-for-the-overcloud">Configure a nameserver for the Overcloud</a></li>
<li><a class="reference internal" href="#deploy-the-overcloud">Deploy the Overcloud</a></li>
<li><a class="reference internal" href="#post-deployment">Post-Deployment</a><ul>
<li><a class="reference internal" href="#access-the-overcloud">Access the Overcloud</a></li>
<li><a class="reference internal" href="#setup-the-overcloud-network">Setup the Overcloud network</a></li>
<li><a class="reference internal" href="#validate-the-overcloud">Validate the Overcloud</a></li>
<li><a class="reference internal" href="#redeploy-the-overcloud">Redeploy the Overcloud</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="../installation/installation.html"
                                  title="previous chapter">Undercloud Installation</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../advanced_deployment/advanced_deployment.html"
                                  title="next chapter">Advanced Deployment</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/michaelhenkel/contrail-tripleo-docu
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/basic_deployment/basic_deployment_cli.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
  <div id="admonition_selector">
    <span class="trigger">Limit Environment Specific Content</span>

    <div class="content">
      <span class="title">Operating Systems</span>
      <ul>
        <li><input type="checkbox" id="centos" checked="checked"><label for="centos" title="Step that should only be run when using CentOS.">CentOS</label></li>
        <li><input type="checkbox" id="rhel" checked="checked"><label for="rhel" title="Step that should only be run when using RHEL.">RHEL</label></li>
      </ul>

      <span class="title">RHEL Registration Types</span>
      <ul>
        <li><input type="checkbox" id="portal" checked="checked"><label for="portal" title="Step that should only be run when registering to the Red Hat Portal.">Portal</label></li>
        <li><input type="checkbox" id="satellite" checked="checked"><label for="satellite" title="Step that should only be run when registering to Red Hat Satellite.">Satellite</label></li>
      </ul>

      <span class="title">Environments</span>
      <ul>
        <li><input type="checkbox" id="baremetal" checked="checked"><label for="baremetal" title="Step that should only be run when deploying to baremetal.">Baremetal</label></li>
        <li><input type="checkbox" id="virtual" checked="checked"><label for="virtual" title="Step that should only be run when deploying to virtual machines.">Virtual</label></li>
        <li><input type="checkbox" id="ssl" checked="checked"><label for="ssl" title="Step that should only be run when deploying with SSL OpenStack endpoints.">SSL</label></li>
        <li><input type="checkbox" id="selfsigned" checked="checked"><label for="selfsigned" title="Step that should only be run when deploying with SSL and a self-signed certificate.">Self-Signed SSL</label></li>
      </ul>

      <span class="title">Additional Overcloud Roles</span>
      <ul>
        <li><input type="checkbox" id="ceph" checked="checked"><label for="ceph" title="Step that should only be run when deploying Ceph for use by the Overcloud.">Ceph</label></li>
      </ul>

      <span class="title">Development options</span>
      <ul>
         <li><input type="checkbox" id="source" checked=""><label for="source"
            title="Step that should only be run when choosing to use some components directly from their git source code repositories instead of packages.">Install from source</label></li>
        <li><input type="checkbox" id="stable" checked=""><label for="stable"
            title="Step that should only be run when choosing to use components from their stable branches rather than using packages/source based on current master.">Install from stable branch</label></li>
      </ul>


    </div>
  </div>

  
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>

    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../advanced_deployment/advanced_deployment.html" title="Advanced Deployment"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../installation/installation.html" title="Undercloud Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">tripleo-docs 0.0.1.dev17 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2015, OpenStack Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/tripleo-docs");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>